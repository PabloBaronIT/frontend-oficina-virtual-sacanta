{"version":3,"file":"js/889.437c7ce3.js","mappings":"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","sources":["webpack://oficina-vue/./src/middlewares/setTokenMuni.js","webpack://oficina-vue/./src/views/MuniPayments/MuniPaymentsView.vue","webpack://oficina-vue/./src/views/MuniPayments/MuniPaymentsView.vue?8855"],"sourcesContent":["import axios from \"axios\";\r\nimport { BASE_URL } from \"@/env\";\r\nexport default function setTokenMuni() {\r\n  let refresh = localStorage.getItem(\"refreshToken\"); ///se toma el token refresh\r\n  const apiClient = axios.create({\r\n    baseURL: BASE_URL,\r\n    withCredentials: false,\r\n  });\r\n  apiClient\r\n    .post(\"/refresh-token-muni\", {\r\n      refreshToken: refresh,\r\n    })\r\n    .then((response) => {\r\n      localStorage.setItem(\"token\", response.data.Token);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error.response, \"soy el error del refreshToken\");\r\n    });\r\n}\r\n","<template>\r\n  <!-- <div class=\"containerGeneral\"> -->\r\n  <div class=\"containerTramites\">\r\n    <div class=\"filtro-top\">\r\n      <h1>Registro de pagos</h1>\r\n      <form class=\"d-flex\">\r\n        <input\r\n          @keyup=\"this.validar()\"\r\n          type=\"search\"\r\n          placeholder=\"Ingrese CUIL del vecino\"\r\n          v-model=\"this.search\"\r\n          maxlength=\"11\"\r\n        />\r\n        <button\r\n          class=\"btn btn-outline-success\"\r\n          type=\"button\"\r\n          @click.prevent=\"this.searchValue\"\r\n          :disabled=\"this.disabledBoton\"\r\n        >\r\n          Buscar\r\n        </button>\r\n      </form>\r\n    </div>\r\n\r\n    <table class=\"table table-striped\" v-if=\"this.payments\">\r\n      <tr>\r\n        <th>Id Pago</th>\r\n        <th>Monto</th>\r\n\r\n        <th>Trámite</th>\r\n        <th>Id tramite</th>\r\n        <th>Fecha</th>\r\n        <th>Nombre</th>\r\n        <th>cuil</th>\r\n      </tr>\r\n      <tr v-for=\"item in this.payments\" :key=\"item.id\">\r\n        <td>\r\n          {{ item.id }}\r\n        </td>\r\n        <td>\r\n          {{ item.amount }}\r\n        </td>\r\n        <td>\r\n          {{ item.procedureHistory.procedure.title }}\r\n        </td>\r\n        <td>\r\n          {{ item.procedureHistory.id }}\r\n        </td>\r\n        <td>\r\n          {{ new Date(item.created_at).toLocaleDateString() }}\r\n        </td>\r\n        <td>{{ item.user.firstname }} {{ item.user.lastname }}</td>\r\n        <td>\r\n          {{ item.user.cuil }}\r\n        </td>\r\n\r\n        <!-- <td>{{ item.userMuni.firstname }}{{ item.userMuni.lastname }}</td> -->\r\n      </tr>\r\n    </table>\r\n    <div\r\n      v-if=\"this.loading && !this.error\"\r\n      class=\"spinner-border loading\"\r\n      role=\"status\"\r\n    >\r\n      <span class=\"sr-only\"></span>\r\n    </div>\r\n    <div v-if=\"this.error\">\r\n      <h1>No se encontraron trámites con los filtros especificados</h1>\r\n    </div>\r\n\r\n    <div class=\"nav\">\r\n      <img\r\n        class=\"svg\"\r\n        @click=\"backTramites\"\r\n        src=\"@/assets/previous.svg\"\r\n        alt=\"\"\r\n        v-if=\"this.pagina > 1\"\r\n      />\r\n      <div class=\"pagNum\">\r\n        {{ this.pagina }}\r\n      </div>\r\n\r\n      <img\r\n        @click=\"nextPag\"\r\n        class=\"svg\"\r\n        src=\"@/assets/next.svg\"\r\n        alt=\"\"\r\n        v-if=\"this.payments?.length > 10\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <!-- </div> -->\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport setTokenMuni from \"@/middlewares/setTokenMuni\";\r\nimport { BASE_URL } from \"@/env\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      payments: null,\r\n      pagina: 1,\r\n      search: \"\",\r\n      disabledBoton: false,\r\n      error: false,\r\n      loading: false,\r\n    };\r\n  },\r\n  created() {\r\n    //se obtienen todos los tramites\r\n    this.getPayments();\r\n    this.loading = true;\r\n  },\r\n  methods: {\r\n    nextPag() {\r\n      this.pagina++;\r\n      this.getPayments();\r\n    },\r\n    backTramites() {\r\n      this.pagina--;\r\n      this.getPayments();\r\n    },\r\n    validar() {\r\n      let asd = /^[0-9]+$/;\r\n      if (asd.test(this.search)) {\r\n        this.disabledBoton = false;\r\n      } else {\r\n        this.disabledBoton = true;\r\n      }\r\n    },\r\n    getPayments() {\r\n      const apiClient = axios.create({\r\n        baseURL: BASE_URL,\r\n        withCredentials: false,\r\n        headers: {\r\n          \"auth-header\": localStorage.getItem(\"token\"),\r\n        },\r\n      });\r\n      apiClient\r\n        .get(`/registered-payments?page= ${this.pagina}`)\r\n        .then((response) => {\r\n          this.payments = response.data.RegisteredPayments;\r\n          this.loading = false;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.error = true;\r\n          if (error.response.status === 500) {\r\n            if (error.response.data.message === \"Token de usuario expirado\") {\r\n              setTokenMuni();\r\n              this.getPayments();\r\n            }\r\n          }\r\n        });\r\n    },\r\n    searchValue() {\r\n      console.log(this.search);\r\n      this.loading = true;\r\n      this.payments = \"\";\r\n      const apiClient = axios.create({\r\n        baseURL: BASE_URL,\r\n        withCredentials: false,\r\n        headers: {\r\n          \"auth-header\": localStorage.getItem(\"token\"),\r\n        },\r\n      });\r\n      apiClient\r\n        .post(`/registered-payment?page=${this.pagina}`, {\r\n          user_cuil: this.search,\r\n        })\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.payments = response.data.RegisteredPayment;\r\n          this.loading = false;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          if (error.response.status === 500) {\r\n            if (error.response.data.message === \"Token de usuario expirado\") {\r\n              setTokenMuni();\r\n              this.searchValue();\r\n            }\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* .containerGeneral {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 94vw;\r\n  position: relative;\r\n} */\r\n.containerTramites {\r\n  width: 90%;\r\n\r\n  padding-bottom: 2rem;\r\n  padding-top: 2rem;\r\n  text-align: center;\r\n  position: relative;\r\n  margin: auto;\r\n  justify-content: center;\r\n  /* margin-left: 4rem; */\r\n}\r\n.filtro-top {\r\n  width: 100%;\r\n  color: var(--text-color);\r\n  display: flex;\r\n  justify-content: space-around;\r\n  background: var(grey);\r\n  height: 3rem;\r\n}\r\nth,\r\ntr {\r\n  border-bottom: solid 1px grey;\r\n  font-size: 15px;\r\n  text-align: center;\r\n}\r\ntable {\r\n  margin-top: 3rem;\r\n  background: white;\r\n}\r\n.nav {\r\n  align-self: flex-start;\r\n}\r\n\r\n.svg {\r\n  max-width: 20px;\r\n}\r\n.pagNum {\r\n  margin: 0 2px;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./MuniPaymentsView.vue?vue&type=template&id=2f9b82ae&scoped=true\"\nimport script from \"./MuniPaymentsView.vue?vue&type=script&lang=js\"\nexport * from \"./MuniPaymentsView.vue?vue&type=script&lang=js\"\n\nimport \"./MuniPaymentsView.vue?vue&type=style&index=0&id=2f9b82ae&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User 2\\\\OneDrive\\\\Escritorio\\\\oficina-virtuaL-Romi\\\\frontend-oficina-virtual\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2f9b82ae\"]])\n\nexport default __exports__"],"names":["setTokenMuni","refresh","localStorage","getItem","apiClient","axios","baseURL","BASE_URL","withCredentials","post","refreshToken","then","response","setItem","data","Token","catch","error","console","log","class","_createElementVNode","role","_hoisted_9","_hoisted_12","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onKeyup","validar","type","placeholder","search","maxlength","onClick","searchValue","disabled","disabledBoton","payments","_hoisted_6","_hoisted_7","_Fragment","item","key","id","amount","procedureHistory","procedure","title","Date","created_at","toLocaleDateString","user","firstname","lastname","cuil","loading","this","_hoisted_8","_hoisted_14","pagina","$options","src","_imports_0","alt","_hoisted_15","length","_imports_1","created","getPayments","methods","nextPag","backTramites","asd","test","headers","get","RegisteredPayments","status","message","user_cuil","RegisteredPayment","__exports__","render"],"sourceRoot":""}