"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[900],{9900:function(e,a,s){s.r(a),s.d(a,{default:function(){return N}});var t=s(3396),l=s(7139);const i=e=>((0,t.dD)("data-v-d96c4774"),e=e(),(0,t.Cn)(),e),o={key:0,class:"container"},r=i((()=>(0,t._)("h2",null,"Para poder ingresar a nuestra web, debe completar sus datos:",-1))),n={class:"interno"},d={class:"row"},u={class:"col"},c={class:"col"},m={class:"row"},h={class:"col"},g={class:"col"},p={class:"row"},f={class:"col"},v={class:"col"},b={class:"row"},y={class:"col-6"},w={class:"col"},P={class:"row-center"},U=i((()=>(0,t._)("h3",null,"Elige tu ávatar",-1))),_={style:{display:"flex","flex-direction":"row","justify-content":"center"}},I=["onClick"],C=["src"],k={style:{"margin-top":"2rem"}},V={key:0,class:"alert alert-success",role:"alert"},q=["disabled"];function S(e,a,s,i,S,x){const D=(0,t.up)("FormKit");return this.setPermission?((0,t.wg)(),(0,t.iD)("div",o,[r,(0,t.Wm)(D,{type:"form",id:"registration-example",actions:!1,"incomplete-message":"Aun no has completado todos los campos.",onKeyup:this.validar},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",d,[(0,t._)("div",u,[(0,t.Wm)(D,{modelValue:this.firstname,"onUpdate:modelValue":a[0]||(a[0]=e=>this.firstname=e),type:"text",name:"name",label:"Nombre",placeholder:"Nombre",validation:"required|length:3,30|alpha:latin","validation-messages":{required:"Ingresa un nombre",length:"El nombre debe tener entre 3 y 30 letras",alpha:"No se admiten nùmeros ni sìmbolos"}},null,8,["modelValue"])]),(0,t._)("div",c,[(0,t.Wm)(D,{modelValue:this.lastname,"onUpdate:modelValue":a[1]||(a[1]=e=>this.lastname=e),type:"text",name:"lastname",label:"Apellido",placeholder:"Apellido",validation:"required|length:3,30|text|alpha:latin","validation-messages":{required:"Ingresa un apellido",length:"El apellido debe tener entre 3 y 30 letras",alpha:"No se admiten nùmeros ni sìmbolos"}},null,8,["modelValue"])])]),(0,t._)("div",m,[(0,t._)("div",h,[(0,t.Wm)(D,{modelValue:this.cuil,"onUpdate:modelValue":a[2]||(a[2]=e=>this.cuil=e),type:"number",name:"cuil",label:"CUIL",placeholder:"CUIL",validation:"required|number|length:11,11",help:"Ingresar solo numeros","validation-messages":{required:"Ingresa el CUIL sin simbolos ni espacios",number:"Ingresar solo nùmeros",length:"El CUIL debe tener 11 caracteres"}},null,8,["modelValue"])]),(0,t._)("div",g,[(0,t.Wm)(D,{modelValue:this.postCode,"onUpdate:modelValue":a[3]||(a[3]=e=>this.postCode=e),type:"number",name:"postCode",label:"Codigo Postal",placeholder:"Codigo Postal",validation:"required|number|length:4,4",help:"Ingresar solo numeros","validation-messages":{required:"Ingresa codigo postal sin simbolos ni espacios",number:"Ingresar solo nùmeros",length:"El Código Postal debe tener 4 caractéres"}},null,8,["modelValue"])])]),(0,t._)("div",p,[(0,t._)("div",f,[(0,t.Wm)(D,{modelValue:this.adress,"onUpdate:modelValue":a[4]||(a[4]=e=>this.adress=e),type:"text",name:"adress",label:"Direccion",placeholder:"Direccion",validation:"required|length:3,30","validation-messages":{required:"Ingresa una dirección",length:"Debe tener entre 3 a 30 caractéres"}},null,8,["modelValue"])]),(0,t._)("div",v,[(0,t.Wm)(D,{modelValue:this.city,"onUpdate:modelValue":a[5]||(a[5]=e=>this.city=e),type:"text",name:"city",label:"Ciudad",placeholder:"Ciudad",validation:"required|length:3,30","validation-messages":{required:"Ingresa una Ciudad",length:"Debe tener entre 3 a 30 caracteres"}},null,8,["modelValue"])])]),(0,t._)("div",b,[(0,t._)("div",y,[(0,t.Wm)(D,{modelValue:this.email,"onUpdate:modelValue":a[6]||(a[6]=e=>this.email=e),type:"email",name:"email",label:"Tu email",placeholder:"ejemplo@ejemplo.com",validation:"required|email","validation-messages":{required:"Ingresa tu email",email:"Email invalido"}},null,8,["modelValue"])]),(0,t._)("div",w,[(0,t.Wm)(D,{modelValue:this.telefono,"onUpdate:modelValue":a[7]||(a[7]=e=>this.telefono=e),type:"number",name:"telefono",label:"Telefóno",placeholder:"Teléfono",validation:"required|number|length:6,20",help:"Ingresar solo numeros","validation-messages":{required:"Ingresa el codigo de area y telefono sin 0 ni 15 y sin espacios",number:"Ingresar solo nùmeros",length:"Debe ingresar al menos 6 caracteres, y hasta 30, como máximo"}},null,8,["modelValue"])])]),(0,t._)("div",P,[U,(0,t._)("div",_,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.avatar,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a,onClick:a=>this.selectAvatar(e.linck)},[(0,t._)("img",{src:e.linck,alt:"imagen"},null,8,C)],8,I)))),128))])]),(0,t._)("div",k,[this.registrado?((0,t.wg)(),(0,t.iD)("div",V,(0,l.zw)(this.message),1)):(0,t.kq)("",!0),(0,t._)("input",{class:"btn btn-primary btn-lg botonSubmit",type:"button",value:"Registrar",onClick:a[8]||(a[8]=(...e)=>x.registrar&&x.registrar(...e)),disabled:this.disabled},null,8,q)])])])),_:1},8,["onKeyup"])])):(0,t.kq)("",!0)}s(7658);var x=s(8713),D=s(5939),L=s(70),T=s(9306),Z={name:"UpdateDataView",data(){return{firstname:"",lastname:"",telefono:"",email:"",cuil:"",adress:"",city:"",postCode:"",registrado:!1,message:"",avatarSelect:"",user:null,avatar:[{linck:"https://res.cloudinary.com/ddko88otf/image/upload/v1691603467/Recurso_10_z2cja8.png"},{linck:"https://res.cloudinary.com/ddko88otf/image/upload/v1691603467/Recurso_10_z2cja8.png"}],disabled:!0}},created(){this.getMyProfile()},computed:{setPermission(){return!0===this.$store.state.loggedIn}},methods:{validar(){let e=/^[0-9]+$/;null!=this.firstname&&null!=this.lastname&&null!=this.cuil&&this.cuil.length>0&&11===this.cuil.length&&null!=this.telefono&&this.telefono.length>=6&&this.telefono.length<20&&4===this.postCode.length&&null!=this.email&&null!=this.avatarSelect&&e.test(this.cuil)&&e.test(this.postCode)&&e.test(this.telefono)?this.disabled=!1:this.disabled=!0},selectAvatar(e){this.avatarSelect=e},registrar(){let e={email:this.email,cuil:this.cuil,city:this.city,postCode:this.postCode,adress:this.adress,firstname:this.firstname,lastname:this.lastname,avatar:this.avatarSelect,phoneNumber:this.telefono};console.log(e);const a=L.ZP.create({baseURL:T._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});a.put("/oficina/user",e).then((e=>{console.log(e.data),this.message=e.data.message,this.registrado=!0,this.firstname="",this.lastname="",this.telefono="",this.email="",this.cuil="",this.adress="",this.city="",this.postCode="",this.z(),setTimeout((()=>{this.$router.push("/munienlinea")}),2e3)})).catch((function(e){console.log(e),500===e.response.status&&("Token de usuario expirado"===e.response.data.message&&((0,x.Z)(),this.registrar()),"Token de representante expirado"===e.response.data.message&&((0,D.Z)(),this.registrar()))}))},getMyProfile(){const e=L.ZP.create({baseURL:T._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.get("/oficina/user/profile").then((e=>{console.log(e.data,"datos de usuariodb"),this.firstname=e.data.UserProfile.user.firstname||null,this.lastname=e.data.UserProfile.user.lastname||null,this.telefono=e.data.UserProfile.user.phoneNumber||null,this.email=e.data.UserProfile.user.email||null,this.cuil=e.data.UserProfile.user.cuil||null,this.adress=e.data.UserProfile.user.adress||null,this.city=e.data.UserProfile.user.city||null,this.postCode=e.data.UserProfile.user.postCode||null})).catch((e=>{console.log(e),500===e.response.status&&("Token de usuario expirado"===e.response.data.message&&((0,x.Z)(),this.getMyProfile()),"Token de representante expirado"===e.response.data.message&&((0,D.Z)(),this.getMyProfile()))}))},getMyProfileNew(){const e=L.ZP.create({baseURL:T._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.get("/oficina/user/profile").then((e=>{console.log(e.data,"datos de usuariodb"),this.user=e.data.UserProfile.user,this.dispatchLogin(),window.localStorage.setItem("role",e.data.UserProfile.user.role||null),window.localStorage.setItem("name",e.data.UserProfile.user.firstname||null),window.localStorage.setItem("lastname",e.data.UserProfile.user.lastname||null),window.localStorage.setItem("cuil",e.data.UserProfile.user.cuil||null),window.localStorage.setItem("adress",e.data.UserProfile.user.adress||null),window.localStorage.setItem("email",e.data.UserProfile.user.email||null),window.localStorage.setItem("id",e.data.UserProfile.user.id||null),window.localStorage.setItem("fecha-creacion",e.data.UserProfile.user.created_at||null),window.localStorage.setItem("nivel",e.data.UserProfile.user.level.level||null),this.loading=!1})).catch((e=>{console.log(e),500===e.response.status&&("Token de usuario expirado"===e.response.data.message&&((0,x.Z)(),this.getMyProfile()),"Token de representante expirado"===e.response.data.message&&((0,D.Z)(),this.getMyProfile()))}))},dispatchLogin(){this.$store.dispatch("mockLoginAction",this.user)}}},W=s(89);const M=(0,W.Z)(Z,[["render",S],["__scopeId","data-v-d96c4774"]]);var N=M}}]);
//# sourceMappingURL=900.164fedcf.js.map