"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[889],{3475:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(70),n=s(9306);function i(){let e=localStorage.getItem("refreshToken");const t=a.ZP.create({baseURL:n._n,withCredentials:!1});t.post("/refresh-token-muni",{refreshToken:e}).then((e=>{localStorage.setItem("token",e.data.Token)})).catch((e=>{console.log(e.response,"soy el error del refreshToken")}))}},889:function(e,t,s){s.r(t),s.d(t,{default:function(){return R}});var a=s(3396),n=s(9242),i=s(7139),r=s(4535),l=s(8031);const o=e=>((0,a.dD)("data-v-2f9b82ae"),e=e(),(0,a.Cn)(),e),c={class:"containerTramites"},d={class:"filtro-top"},h=o((()=>(0,a._)("h1",null,"Registro de pagos",-1))),u={class:"d-flex"},g=["disabled"],p={key:0,class:"table table-striped"},m=o((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Id Pago"),(0,a._)("th",null,"Monto"),(0,a._)("th",null,"Trámite"),(0,a._)("th",null,"Id tramite"),(0,a._)("th",null,"Fecha"),(0,a._)("th",null,"Nombre"),(0,a._)("th",null,"cuil")],-1))),_={key:1,class:"spinner-border loading",role:"status"},k=o((()=>(0,a._)("span",{class:"sr-only"},null,-1))),y=[k],b={key:2},f=o((()=>(0,a._)("h1",null,"No se encontraron trámites con los filtros especificados",-1))),v=[f],w={class:"nav"},P={class:"pagNum"};function D(e,t,s,o,k,f){return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[h,(0,a._)("form",u,[(0,a.wy)((0,a._)("input",{onKeyup:t[0]||(t[0]=e=>this.validar()),type:"search",placeholder:"Ingrese CUIL del vecino","onUpdate:modelValue":t[1]||(t[1]=e=>this.search=e),maxlength:"11"},null,544),[[n.nr,this.search]]),(0,a._)("button",{class:"btn btn-outline-success",type:"button",onClick:t[2]||(t[2]=(0,n.iM)(((...e)=>this.searchValue&&this.searchValue(...e)),["prevent"])),disabled:this.disabledBoton}," Buscar ",8,g)])]),this.payments?((0,a.wg)(),(0,a.iD)("table",p,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.payments,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,i.zw)(e.id),1),(0,a._)("td",null,(0,i.zw)(e.amount),1),(0,a._)("td",null,(0,i.zw)(e.procedureHistory.procedure.title),1),(0,a._)("td",null,(0,i.zw)(e.procedureHistory.id),1),(0,a._)("td",null,(0,i.zw)(new Date(e.created_at).toLocaleDateString()),1),(0,a._)("td",null,(0,i.zw)(e.user.firstname)+" "+(0,i.zw)(e.user.lastname),1),(0,a._)("td",null,(0,i.zw)(e.user.cuil),1)])))),128))])):(0,a.kq)("",!0),this.loading&&!this.error?((0,a.wg)(),(0,a.iD)("div",_,y)):(0,a.kq)("",!0),this.error?((0,a.wg)(),(0,a.iD)("div",b,v)):(0,a.kq)("",!0),(0,a._)("div",w,[this.pagina>1?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"svg",onClick:t[3]||(t[3]=(...e)=>f.backTramites&&f.backTramites(...e)),src:r,alt:""})):(0,a.kq)("",!0),(0,a._)("div",P,(0,i.zw)(this.pagina),1),this.payments?.length>10?((0,a.wg)(),(0,a.iD)("img",{key:1,onClick:t[4]||(t[4]=(...e)=>f.nextPag&&f.nextPag(...e)),class:"svg",src:l,alt:""})):(0,a.kq)("",!0)])])}var T=s(70),x=s(3475),C=s(9306),z={data(){return{payments:null,pagina:1,search:"",disabledBoton:!1,error:!1,loading:!1}},created(){this.getPayments(),this.loading=!0},methods:{nextPag(){this.pagina++,this.getPayments()},backTramites(){this.pagina--,this.getPayments()},validar(){let e=/^[0-9]+$/;e.test(this.search)?this.disabledBoton=!1:this.disabledBoton=!0},getPayments(){const e=T.ZP.create({baseURL:C._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.get(`/registered-payments?page= ${this.pagina}`).then((e=>{this.payments=e.data.RegisteredPayments,this.loading=!1})).catch((e=>{console.log(e),this.error=!0,500===e.response.status&&"Token de usuario expirado"===e.response.data.message&&((0,x.Z)(),this.getPayments())}))},searchValue(){console.log(this.search),this.loading=!0,this.payments="";const e=T.ZP.create({baseURL:C._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.post(`/registered-payment?page=${this.pagina}`,{user_cuil:this.search}).then((e=>{console.log(e.data),this.payments=e.data.RegisteredPayment,this.loading=!1})).catch((e=>{console.log(e),500===e.response.status&&"Token de usuario expirado"===e.response.data.message&&((0,x.Z)(),this.searchValue())}))}}},I=s(89);const Z=(0,I.Z)(z,[["render",D],["__scopeId","data-v-2f9b82ae"]]);var R=Z},8031:function(e,t,s){e.exports=s.p+"img/next.1e590530.svg"},4535:function(e,t,s){e.exports=s.p+"img/previous.f2eb8db4.svg"}}]);
//# sourceMappingURL=889.437c7ce3.js.map