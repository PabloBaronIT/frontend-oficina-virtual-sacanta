{"version":3,"file":"js/836.fd4a2c0c.js","mappings":"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","sources":["webpack://oficina-vue/./src/views/PagoVista/pagoResultadoView.vue","webpack://oficina-vue/./src/views/PagoVista/pagoResultadoView.vue?6f2f"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div v-if=\"this.loading\" class=\"spinner-border loading\" role=\"status\">\r\n      <span class=\"sr-only\"></span>\r\n    </div>\r\n    <div v-else class=\"container\">\r\n      <h1>{{ this.message }} <br /></h1>\r\n      <h2>Gracias por utilizar la oficina virtual de Sacanta</h2>\r\n      <img src=\"@/assets/logoSacanta.svg\" alt=\"Sacanta\" class=\"imagenlogo\" />\r\n      <router-link :to=\"`/munienlinea`\" class=\"bn3\"> Inicio </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport setToken from \"@/middlewares/setToken\";\r\nimport setTokenRelations from \"@/middlewares/setTokenRelations\";\r\nimport { BASE_URL } from \"@/env\";\r\n\r\nexport default {\r\n  name: \"Pago-exitoso\",\r\n  created() {\r\n    this.IdResultado = this.$route.query.IdResultado;\r\n    this.IdReferenciaOperacion = this.$route.query.IdReferenciaOperacion;\r\n    this.loading = true;\r\n    this.setPayment();\r\n    this.getMyProfile();\r\n  },\r\n  data() {\r\n    return {\r\n      IdResultado: \"\",\r\n      IdReferenciaOperacion: \"\",\r\n      message: \"\",\r\n      loading: false,\r\n      user: \"\",\r\n      cidiCookie: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    setPayment() {\r\n      console.log(\r\n        this.IdResultado,\r\n        this.IdReferenciaOperacion,\r\n        \"soy el idResutado y el IdReferencia\"\r\n      );\r\n\r\n      const apiClient = axios.create({\r\n        baseURL: BASE_URL,\r\n        withCredentials: false,\r\n        headers: {\r\n          \"auth-header\": localStorage.getItem(\"token\"),\r\n          \"access-user-header\":\r\n            \"^Yh19S&^8$yl01&Fagyg8eLxrI8uxypiCpdUdRscjF!xKSSqq\",\r\n        },\r\n      });\r\n      apiClient\r\n        .post(\"/confirm-payment/\" + this.IdReferenciaOperacion)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.message = response.data.message;\r\n          this.loading = false;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.message = error.response.data.message;\r\n          this.loading = false;\r\n          if (error.response.status === 500) {\r\n            if (error.response.data.message === \"Token de usuario expirado\") {\r\n              setToken();\r\n              this.setPayment();\r\n            }\r\n            if (\r\n              error.response.data.message === \"Token de representante expirado\"\r\n            ) {\r\n              setTokenRelations();\r\n              this.setPayment();\r\n            }\r\n          }\r\n        });\r\n    },\r\n    dispatchLogin() {\r\n      this.$store.dispatch(\"mockLoginAction\", this.user);\r\n    },\r\n    dispatchCidi() {\r\n      this.$store.dispatch(\"mockCidiAction\", this.cidiCookie);\r\n    },\r\n    dispatchLoginTrue() {\r\n      this.$store.dispatch(\"mockPaseAction\");\r\n    },\r\n    getMyProfile() {\r\n      const apiClient = axios.create({\r\n        baseURL: BASE_URL,\r\n        withCredentials: false,\r\n        headers: {\r\n          \"auth-header\": localStorage.getItem(\"token\"),\r\n        },\r\n      });\r\n      apiClient\r\n        .get(\"/oficina/user/profile\")\r\n        .then((response) => {\r\n          console.log(response.data, \"datos de usuariodb\");\r\n          this.user = response.data.UserProfile.user;\r\n          this.user.cidiCookie = this.cidiCookie;\r\n          this.dispatchLogin();\r\n          this.dispatchLoginTrue();\r\n          window.localStorage.setItem(\r\n            \"role\",\r\n            response.data.UserProfile.user.role || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"name\",\r\n            response.data.UserProfile.user.firstname || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"lastname\",\r\n            response.data.UserProfile.user.lastname || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"cuil\",\r\n            response.data.UserProfile.user.cuil || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"adress\",\r\n            response.data.UserProfile.user.adress || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"email\",\r\n            response.data.UserProfile.user.email || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"id\",\r\n            response.data.UserProfile.user.id || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"fecha-creacion\",\r\n            response.data.UserProfile.user.created_at || null\r\n          );\r\n          window.localStorage.setItem(\r\n            \"nivel\",\r\n            response.data.UserProfile.user.level.level || null\r\n          );\r\n          // this.loading = false;\r\n          // this.$router.push(\"munienlinea\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          if (error.response.status === 500) {\r\n            if (error.response.data.message === \"Token de usuario expirado\") {\r\n              setToken();\r\n              this.getMyProfile();\r\n            }\r\n            if (\r\n              error.response.data.message === \"Token de representante expirado\"\r\n            ) {\r\n              setTokenRelations();\r\n              this.getMyProfile();\r\n            }\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  padding-top: 5rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.bn3 {\r\n  height: 3rem;\r\n  width: 11rem;\r\n  border: 0.16em solid rgb(255, 255, 255);\r\n  text-align: center;\r\n  background-image: linear-gradient(\r\n    to right,\r\n    #399943,\r\n    #4ea242,\r\n    #62aa40,\r\n    #75b23f,\r\n    #88ba3e\r\n  );\r\n  border-top-left-radius: 30px;\r\n  border-top-right-radius: 30px;\r\n  padding-top: 0.8rem;\r\n  margin-top: 1rem;\r\n  transition: all 0.2s;\r\n  border-style: none;\r\n}\r\n.imagenlogo {\r\n  width: 100px;\r\n  height: 120px;\r\n  margin-top: 2rem;\r\n}\r\n</style>\r\n","import { render } from \"./pagoResultadoView.vue?vue&type=template&id=407b9fc0&scoped=true\"\nimport script from \"./pagoResultadoView.vue?vue&type=script&lang=js\"\nexport * from \"./pagoResultadoView.vue?vue&type=script&lang=js\"\n\nimport \"./pagoResultadoView.vue?vue&type=style&index=0&id=407b9fc0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User 2\\\\OneDrive\\\\Escritorio\\\\oficina-virtuaL-Romi\\\\frontend-oficina-virtual\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-407b9fc0\"]])\n\nexport default __exports__"],"names":["class","role","_createElementVNode","_hoisted_3","src","_imports_0","alt","_createElementBlock","_hoisted_1","loading","_hoisted_2","_hoisted_5","message","_hoisted_7","_hoisted_8","_createVNode","_component_router_link","to","name","created","this","IdResultado","$route","query","IdReferenciaOperacion","setPayment","getMyProfile","data","user","cidiCookie","methods","console","log","apiClient","axios","baseURL","BASE_URL","withCredentials","headers","localStorage","getItem","post","then","response","catch","error","status","setToken","setTokenRelations","dispatchLogin","$store","dispatch","dispatchCidi","dispatchLoginTrue","get","UserProfile","window","setItem","firstname","lastname","cuil","adress","email","id","created_at","level","__exports__","render"],"sourceRoot":""}