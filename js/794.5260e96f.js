"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[794],{2123:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ne}});var s=i(3396),o=i(7139),a=i(8018),n=i.p+"img/FlechaDerecha.c32e7122.svg";const r=e=>((0,s.dD)("data-v-6facb8ba"),e=e(),(0,s.Cn)(),e),l={key:0,class:"sector-container"},u={class:"row"},c={style:{"margin-left":"6vw","margin-top":"7vh"}},p={class:"tituloPrincipal"},d=r((()=>(0,s._)("h5",null,[(0,s.Uk)(" Ingrese aquí su solicitud en caso de requerir del servicio de "),(0,s._)("br"),(0,s.Uk)(" limpieza en algún lugar en particular "),(0,s._)("br")],-1))),h={class:"progress-container"},g=r((()=>(0,s._)("div",{class:"progress",id:"progress"},null,-1))),m=r((()=>(0,s._)("div",{class:"circle active"},"1",-1))),v={key:0,class:"row"},y=r((()=>(0,s._)("div",{class:"recuadro row"},[(0,s._)("h5",{style:{color:"#019939","font-weight":"900","font-size":"24px"}}," Para iniciar con esta gestión vas a necesitar contar con: "),(0,s._)("h5",null,". Ubicación exacta del lugar donde se requiere el servicio."),(0,s._)("h5",null," . Una descripción de la situación y fotografías, si dispone de ellas. ")],-1))),f=[y],w={key:1,class:"row",style:{"margin-top":"5vh"}},_={key:2,class:"volver"},x={style:{display:"flex","flex-direction":"row"}},k=r((()=>(0,s._)("img",{src:a,alt:"imagen"},null,-1))),q=r((()=>(0,s._)("h4",null,"Volver atrás",-1))),b=r((()=>(0,s._)("h4",null,"Iniciar trámite",-1))),I=r((()=>(0,s._)("img",{src:n,alt:"imagen"},null,-1))),P=[b,I];function T(e,t,i,a,n,r){const y=(0,s.up)("FormularioComponent"),b=(0,s.up)("router-link");return r.setPermission?((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",u,[(0,s._)("h5",c,(0,o.zw)(this.sectorTitle),1),(0,s._)("h1",p,[(0,s.Uk)((0,o.zw)(this.titulo)+" ",1),d])]),(0,s._)("div",h,[g,m,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.preguntas,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"circle"},(0,o.zw)(t+2),1)))),128))]),1==this.inicio?((0,s.wg)(),(0,s.iD)("div",v,f)):((0,s.wg)(),(0,s.iD)("div",w,[(0,s.Wm)(y,{questionProp:this.preguntas,nivel:this.nivel,dispatchProcedure:this.dispatchProcedure,setProcedure:this.setProcedure,outProcedure:this.outProcedure,progreso:this.progreso,retroPogreso:this.retroPogreso},null,8,["questionProp","nivel","dispatchProcedure","setProcedure","outProcedure","progreso","retroPogreso"])])),this.inicio?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",x,[(0,s.Wm)(b,{to:`/sector/${this.sectorTitle}/${this.$route.query.sectorId}`},{default:(0,s.w5)((()=>[k])),_:1},8,["to"]),q]),(0,s._)("div",{style:{display:"flex","flex-direction":"row"},onClick:t[0]||(t[0]=()=>{this.inicio=!1,this.progreso()})},P)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}i(7658);var D=i(9242),$=i(731);const C=e=>((0,s.dD)("data-v-364bdc9a"),e=e(),(0,s.Cn)(),e),F={key:0,class:"spinner-border",role:"status"},S=C((()=>(0,s._)("span",null,null,-1))),z=[S],O={key:1,class:"topquestion"},U={action:"",style:{"margin-bottom":"20vh"}},L=["v-if"],A={key:0,class:"tipoRadio"},Z=["name","type","value"],V=["for"],M=C((()=>(0,s._)("br",null,null,-1))),j=["for"],R={key:1,class:"tipoTexto"},Y={for:""},N={key:2,class:"tipoTexto",style:{"align-items":"center"}},W=C((()=>(0,s._)("br",null,null,-1))),E={for:""},G=["type"],B={key:3,class:"tipoMap"},H={style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}},K=C((()=>(0,s._)("label",null,"Calle",-1))),J=["type"],Q=C((()=>(0,s._)("label",null,"Nro.",-1))),X=["type"],ee={style:{"margin-bottom":"4vh",display:"flex","flex-direction":"row","align-items":"center"}},te=C((()=>(0,s._)("label",null,"Entre calles",-1))),ie=["type"],se={key:4,class:"file-container"},oe={key:0,class:"file-intro"},ae={key:0,alt:"",id:"img-preview",class:"imgFile"},ne={key:1,class:"bi bi-upload",style:{"font-size":"35px"}},re=C((()=>(0,s._)("hr",null,null,-1))),le=["type"],ue={key:1,class:"cargado"},ce=C((()=>(0,s._)("img",{src:$,alt:"",id:"img-preview",class:"imgFile"},null,-1))),pe=C((()=>(0,s._)("p",null,"Archivo cargado",-1))),de=[ce,pe],he={class:"error"},ge={class:"volver"},me=C((()=>(0,s._)("img",{src:a,alt:"imagen"},null,-1))),ve=C((()=>(0,s._)("h4",null,"Volver atrás",-1))),ye=[me,ve],fe=C((()=>(0,s._)("h4",null,"Siguiente",-1))),we=C((()=>(0,s._)("img",{src:n,alt:"imagen"},null,-1))),_e=[fe,we],xe={key:2,class:"alert alert-success text-center",role:"alert"},ke=C((()=>(0,s._)("h5",null,[(0,s.Uk)(" Gracias por utilizar la Oficina Virtual de la municipalidad de Sacanta! "),(0,s._)("h6",null,"Su reclamo ha sido presentado!")],-1))),qe=[ke],be={key:3},Ie={key:4,class:"btn-submit"};function Pe(e,t,i,a,n,r){const l=(0,s.up)("MapaLocationComponentVue");return(0,s.wg)(),(0,s.iD)("div",null,[this.loading?((0,s.wg)(),(0,s.iD)("div",F,z)):(0,s.kq)("",!0),this.preguntas?((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("h5",null,(0,o.zw)(this.preguntas[this.paso].question.title),1)])):(0,s.kq)("",!0),(0,s._)("form",U,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.preguntas[this.paso].questionOption,((e,i)=>((0,s.wg)(),(0,s.iD)("div",{"v-if":this.preguntas[this.paso].questionOption?.length>=1&&this.paso>this.preguntas.length,key:e.id,class:"questions"},["radio"==e.type?((0,s.wg)(),(0,s.iD)("div",A,[(0,s.wy)((0,s._)("input",{name:this.preguntas[this.paso].question.title,type:e.type,"onUpdate:modelValue":t[0]||(t[0]=e=>this.selected=e),value:i+1},null,8,Z),[[D.YZ,this.selected]]),(0,s._)("div",null,[(0,s._)("label",{for:e.title,class:"option-text"},(0,o.zw)(e.title),9,V),M,(0,s._)("label",{for:e.id,class:""},(0,o.zw)(e.description),9,j)])])):(0,s.kq)("",!0),"Indique la ubicación"!==e.title&&"text"===e.type?((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("label",Y,(0,o.zw)(e.title),1),(0,s.wy)((0,s._)("textarea",{name:"",id:"",cols:"30",rows:"10",style:{width:"27vw","margin-left":"1rem"},"onUpdate:modelValue":t[1]||(t[1]=e=>this.textInput=e)},null,512),[[D.nr,this.textInput]])])):(0,s.kq)("",!0),"Indique la ubicación"!==e.title&&"number"===e.type?((0,s.wg)(),(0,s.iD)("div",N,[W,(0,s._)("label",E,(0,o.zw)(e.description),1),(0,s.wy)((0,s._)("input",{class:"form-control text-number-input",style:{width:"27vw"},type:e.type,"onUpdate:modelValue":t[2]||(t[2]=e=>this.textInput=e)},null,8,G),[[D.YZ,this.textInput]])])):(0,s.kq)("",!0),"text"==e.type&&"Indique la ubicación"==e.title?((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",H,[K,(0,s.wy)((0,s._)("input",{class:"form-control text-number-input",type:e.type,"onUpdate:modelValue":t[3]||(t[3]=e=>this.calle=e)},null,8,J),[[D.YZ,this.calle]]),Q,(0,s.wy)((0,s._)("input",{class:"form-control text-number-input",type:e.type,"onUpdate:modelValue":t[4]||(t[4]=e=>this.numero=e)},null,8,X),[[D.YZ,this.numero]])]),(0,s._)("div",ee,[te,(0,s.wy)((0,s._)("input",{class:"form-control text-number-input",type:e.type,"onUpdate:modelValue":t[5]||(t[5]=e=>this.entrecalles=e)},null,8,ie),[[D.YZ,this.entrecalles]])]),(0,s.Wm)(l,{setTextInput:this.setTextInput},null,8,["setTextInput"])])):(0,s.kq)("",!0),"file"==e.type?((0,s.wg)(),(0,s.iD)("div",se,[n.asd?((0,s.wg)(),(0,s.iD)("div",ue,de)):((0,s.wg)(),(0,s.iD)("div",oe,[this.fileSelect?((0,s.wg)(),(0,s.iD)("img",ae)):((0,s.wg)(),(0,s.iD)("i",ne)),re,(0,s.wy)((0,s._)("input",{accept:".jpg, .jpeg, .png, .webp",type:e.type,"onUpdate:modelValue":t[6]||(t[6]=e=>this.fileSelect=e),id:"img-uploader",onChange:t[7]||(t[7]=e=>r.selectFile(e))},null,40,le),[[D.YZ,this.fileSelect]]),(0,s._)("div",null,[this.fileSelect?((0,s.wg)(),(0,s.iD)("input",{key:0,class:"m-2 btn btnColor",type:"button",value:"Subir archivo",onClick:t[8]||(t[8]=e=>r.postFile())})):(0,s.kq)("",!0)])]))])):(0,s.kq)("",!0)],8,L)))),128)),(0,s.wy)((0,s._)("p",he," Debe seleccionar una opcion para continuar ",512),[[D.F8,0==n.validation]])]),(0,s._)("div",ge,[(0,s._)("div",{style:{display:"flex","flex-direction":"row"},onClick:t[9]||(t[9]=e=>r.back())},ye),this.paso+1<this.preguntas.length?((0,s.wg)(),(0,s.iD)("div",{key:0,style:{display:"flex","flex-direction":"row"},onClick:t[10]||(t[10]=()=>{this.preNext()})},_e)):(0,s.kq)("",!0)]),!0===this.servicio?((0,s.wg)(),(0,s.iD)("div",xe,qe)):(0,s.kq)("",!0),null!=this.mensaje?((0,s.wg)(),(0,s.iD)("div",be,[(0,s._)("p",null,(0,o.zw)(this.mensaje),1)])):(0,s.kq)("",!0),this.paso+1===this.preguntas.length?((0,s.wg)(),(0,s.iD)("div",Ie,[(0,s._)("input",{class:"botonSubmit",type:"button",value:"Enviar",onClick:t[11]||(t[11]=(...e)=>this.submitt&&this.submitt(...e))})])):(0,s.kq)("",!0)])}var Te=i(70),De=i(8914),$e=i(8713),Ce=i(5939),Fe=i(9306);const Se={style:{display:"flex","flex-direction":"column","justify-content":"space-around"}};function ze(e,t,i,o,a,n){const r=(0,s.up)("GMapMarker"),l=(0,s.up)("GMapMap");return(0,s.wg)(),(0,s.iD)("div",Se,[(0,s.Wm)(l,{center:a.center,ref:"myMapRef",zoom:7,"map-type-id":"terrain",style:{width:"715px",height:"360px",margin:"auto"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{position:this.markerPosition,clickable:!1,draggable:!0,onDragend:a.updateMarkerPosition},null,8,["position","onDragend"])])),_:1},8,["center"])])}var Oe={name:"MapaLocation",props:{setTextInput:Function},data(){return{lat:"",lng:"",selectedLocation:null,center:{lat:"",lng:""},markerPosition:{lat:0,lng:0},updateMarkerPosition:e=>{this.markerPosition.lat=e.latLng.lat(),this.markerPosition.lng=e.latLng.lng(),this.asd()}}},created(){this.$getLocation().then((e=>{console.log(e,"coordiantes"),this.center.lat=e.lat,this.center.lng=e.lng,this.markerPosition.lat=e.lat,this.markerPosition.lng=e.lng})).catch((e=>{console.log(e)}))},methods:{asd(){this.setTextInput(this.markerPosition.lat.toFixed(7),this.markerPosition.lng.toFixed(7))}}},Ue=i(89);const Le=(0,Ue.Z)(Oe,[["render",ze]]);var Ae=Le,Ze={name:"FormularioComponent",props:{questionProp:Array,nivel:Number,dispatchProcedure:Function,setProcedure:Function,outProcedure:Function,progreso:Function,retroPogreso:Function},components:{MapaLocationComponentVue:Ae},data(){return{modalReclamo:!1,paso:0,validation:null,loading:!1,textInput:"",coordenadas:"",selected:"",catId:null,file:null,fileSelect:null,asd:!1,preguntas:null,respuestas:[],servicio:!1,mensaje:null,sectorTitle:"",formularioTitle:"",calle:"",numero:"",entrecalles:""}},created(){this.loading=!0,this.setLoading(),console.log(this.preguntas.length,"cantidad de preguntas"),this.sectorTitle=this.$route.query.sector,this.formularioTitle=this.$route.params.formularioTitle,console.log(this.nivel,"soy el nivel")},methods:{setTextInput(e,t){console.log(e,t,"soy las coordenadas");let i=`${e},${t}`;this.coordenadas=i},setModal(){this.modalReclamo=!this.modalReclamo},dispatchClean(){this.$store.dispatch("cleanAction")},preNext(){""!=this.calle&&(this.textInput=this.calle+" "+this.numero+" "+this.entrecalles),""==this.selected&&""==this.textInput&&""==this.coordenadas?this.validation=!1:(""!=this.selected&&""==this.textInput&&""==this.coordenadas||""==this.selected&&""!=this.textInput&&""==this.coordenadas||""==this.selected&&""==this.textInput&&""!=this.coordenadas||""==this.selected&&""!=this.textInput&&""!=this.coordenadas)&&(this.next(),this.progreso()),this.asd=!1},selectFile(e){const t=document.getElementById("img-preview");this.file=e.target.files[0];const i=URL.createObjectURL(this.file);t.src=i,console.log(this.file,"soy el archivo")},postFile:async function(){const e=new FormData;e.append("file",this.file),e.append("upload_preset",Fe.W3),await fetch(Fe.uA,{method:"POST",body:e}).then((e=>e.json())).then((e=>{this.textInput=e.secure_url,this.asd=!0,console.log(this.textInput,"archivo cargado en textInput")})),this.fileSelect=null},next(){let e=this.selected-1,t="",i="",s="";""!=this.textInput&&""==this.coordenadas?(t=this.textInput,e=0,s={question:this.preguntas[this.paso].question.id,question_option_history:[{questionOption:this.preguntas[this.paso].questionOption[e].id,answer:t}]}):""==this.textInput&&""!=this.coordenadas?(t=this.coordenadas,e=1,s={question:this.preguntas[this.paso].question.id,question_option_history:[{questionOption:this.preguntas[this.paso].questionOption[e].id,answer:t}]}):""!=this.textInput&&""!=this.coordenadas?(t=this.textInput,i=this.coordenadas,e=0,s={question:this.preguntas[this.paso].question.id,question_option_history:[{questionOption:this.preguntas[this.paso].questionOption[e].id,answer:t},{questionOption:this.preguntas[this.paso].questionOption[e].id,answer:i}]}):(t=this.preguntas[this.paso].questionOption[e].title,s={question:this.preguntas[this.paso].question.id,question_option_history:[{questionOption:this.preguntas[this.paso].questionOption[e].id,answer:t}]}),this.setProcedure(s),this.respuestas.push(s),console.log(this.respuestas,"!respuestas "),this.selected="",e=0,this.calle="",this.numero="",this.entrecalles="",this.textInput="",this.coordenadas="",this.validation=!0,this.paso++},submitt(){if(0==this.selected&&""==this.textInput&&""==this.coordenadas?this.validation=!1:this.validation=!0,this.validation){this.preNext(),this.loading=!0;const e=Te.ZP.create({baseURL:Fe._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.post("/oficina/procedures/submit-procedure",{questions:this.respuestas,procedureId:parseInt(this.$route.params.formularioId)}).then((e=>{if(console.log(e),201==e.status){let t=e.data.procedure_history_id;2===this.nivel?this.$router.push(`/pago/${t}`):(this.textInput="",alert("Su reclamo fue presentado! Gracia por utilizar nuestra Oficina Virtual.")),this.dispatchClean(),this.dispatchProcedure()}})).catch((e=>{console.log(e),401==e.response.status&&(alert("No esta autorizado para realizar este tramite."),this.$router.replace({path:"/munienlinea"})),500===e.response.status?("Token de usuario expirado"===e.response.data.message&&((0,$e.Z)(),this.submitt()),"Token de representante expirado"===e.response.data.message&&((0,Ce.Z)(),this.submitt())):this.mensaje="Se ha producido un error, vuelva a interntarlo."})).finally((()=>{this.loading=!1})),this.loading=!1}},back(){0===this.paso?this.$router.push(`/sector/${this.$route.query.sectorTitle}/${this.$route.query.sectorId}`):(this.paso=this.paso-1,this.outProcedure(),this.respuestas.pop(),this.retroPogreso())},cancel(){this.$router.replace({path:"/munienlinea"}),this.preguntas=[]},ver(){var e=new De.kH;e.setTextColor(120,12,3),e.setFontSize(22),e.setTextColor(20),e.setFontSize(16),e.text(20,30,"This is some normal sized text underneath."),e.save("a4.pdf")},setLoading(){this.preguntas=this.questionProp,this.loading=!1}}};const Ve=(0,Ue.Z)(Ze,[["render",Pe],["__scopeId","data-v-364bdc9a"]]);var Me=Ve,je={title:"",procedureId:null,questions:[],fecha:(new Date).toLocaleDateString(),precio:"",sectorTitle:""},Re={data(){return{category:this.$route.params,preguntas:"",nivel:"",inicio:!0,descripcion:"",titulo:"",currentActive:0}},components:{FormularioComponent:Me},created(){this.sectorTitle=this.$route.query.sectorTitle,this.getTemplate(),je.questions=[]},methods:{setProcedure(e){je.questions.push(e)},outProcedure(){je.questions.pop()},back(){this.$router.go(-1)},dispatchProcedure(){this.$store.dispatch("saveP",je)},getTemplate(){const e=Te.ZP.create({baseURL:Fe._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});e.get("/oficina/procedures/template/"+this.$route.params.formularioId).then((e=>{console.log(e.data),this.preguntas=e.data.Template.questionProcedure,this.nivel=e.data.Template.level.level,this.descripcion=e.data.Template.description,je.procedureId=e.data.Template.id,je.title=e.data.Template.title,je.precio=e.data.Template.price,this.titulo=e.data.Template.title})).catch((e=>{console.log(e),500===e.response.status&&("Token de usuario expirado"===e.response.data.message&&((0,$e.Z)(),this.getTemplate()),"Token de representante expirado"===e.response.data.message&&((0,Ce.Z)(),this.getTemplate())),401===e.response.status&&this.$router.push("micuenta-update")}))},progreso(){this.currentActive++,this.currentActive>this.preguntas.length&&(this.currentActive=this.preguntas.length),this.update()},retroPogreso(){this.currentActive--,this.removeClass()},removeClass(){const e=document.querySelectorAll(".circle"),t=document.getElementById("progress");e[this.currentActive+1].classList.remove("active");const i=document.querySelectorAll(".active");t.style.width=(i.length-1)/(e.length-1)*100+"%"},update(){const e=document.querySelectorAll(".circle"),t=document.getElementById("progress");e[this.currentActive].classList.add("active");const i=document.querySelectorAll(".active");t.style.width=(i.length-1)/(e.length-1)*100+"%"}},computed:{setPermission(){return!0===this.$store.state.loggedIn}}};const Ye=(0,Ue.Z)(Re,[["render",T],["__scopeId","data-v-6facb8ba"]]);var Ne=Ye},8018:function(e,t,i){e.exports=i.p+"img/FlechaIzquierda.96256fc8.svg"},731:function(e,t,i){e.exports=i.p+"img/red-check-mark-icon.dd8d0a39.svg"}}]);
//# sourceMappingURL=794.5260e96f.js.map