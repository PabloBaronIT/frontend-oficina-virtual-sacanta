"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[241],{7241:function(a,t,e){e.r(t),e.d(t,{default:function(){return $}});var s=e(3396),o=e(7139);const n=a=>((0,s.dD)("data-v-8146926c"),a=a(),(0,s.Cn)(),a),i={key:0,class:"sector-container"},l=n((()=>(0,s._)("div",{class:"top"},[(0,s._)("h1",null,"Mis Comunicaciones")],-1))),c=["v-if"],d=n((()=>(0,s._)("h1",null,null,-1))),m={key:0,class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},u={class:"modal-dialog"},r={class:"modal-content"},g={class:"modal-header"},h={class:"modal-title fs-5",id:"exampleModalLabel"},p=n((()=>(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),b={class:"modal-body"},C=n((()=>(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cerrar ")],-1))),_={class:"loading"},v={key:0,class:"spinner-border loading",role:"status"},f=n((()=>(0,s._)("span",{class:"sr-only"},null,-1))),w=[f];function k(a,t,e,n,f,k){const y=(0,s.up)("CardNotificacionComponentVue");return k.setPermission?((0,s.wg)(),(0,s.iD)("div",i,[l,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.communications,((a,t)=>((0,s.wg)(),(0,s.j4)(y,{dato:a,"data-bs-toggle":"modal","data-bs-target":"#exampleModal","v-if":f.communications.length&&!1===this.loading,key:t,onClick:a=>k.setComunicacion(t)},null,8,["dato","v-if","onClick"])))),128)),(0,s._)("div",{"v-if":this.message&&!1===this.loading},[(0,s._)("h1",null,(0,o.zw)(this.message),1)],8,c),d,this.selectCommunication?((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",u,[(0,s._)("div",r,[(0,s._)("div",g,[(0,s._)("h5",h," Comunicado: "+(0,o.zw)(this.selectCommunication.subject||""),1),p]),(0,s._)("div",b,[(0,s._)("p",null,(0,o.zw)(this.selectCommunication.message||""),1)]),C])])])):(0,s.kq)("",!0),(0,s._)("div",_,[this.loading?((0,s.wg)(),(0,s.iD)("div",v,w)):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)}e(7658);const y=a=>((0,s.dD)("data-v-45ac9b9b"),a=a(),(0,s.Cn)(),a),D={class:"flex-container"},x={class:"top"},z=y((()=>(0,s._)("p",null,"Haz recibido un mensaje",-1))),M={class:"descripcion","data-bs-toggle":"modal","data-bs-target":"#exampleModal"};function j(a,t,e,n,i,l){return(0,s.wg)(),(0,s.iD)("main",D,[(0,s._)("div",x,[z,(0,s._)("p",null,(0,o.zw)(new Date(e.dato.created_at).toLocaleDateString()),1)]),(0,s._)("div",M,[(0,s._)("p",null,(0,o.zw)(e.dato.subject),1)])])}var I={name:"CardNotificacionesComponent",props:{dato:Object},data(){return{}}},L=e(89);const Z=(0,L.Z)(I,[["render",j],["__scopeId","data-v-45ac9b9b"]]);var q=Z,N=e(70),P=e(8713),H=e(9306),S={components:{CardNotificacionComponentVue:q},data(){return{communications:[],loading:!1,selectCommunication:null,message:null}},created(){this.getCommunication()},computed:{setPermission(){return!0===this.$store.state.loggedIn}},methods:{getCommunication(){this.loading=!0;const a=N.ZP.create({baseURL:H._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token")}});a.get("/communications/my-communications").then((a=>{this.loading=!1,console.log(a.data);let t=a.data.Communications;for(let e=0;e<t.length;e++){const a=t[e];this.communications.push(a)}})).catch((a=>{404===a.response.status&&(this.message=a.response.data.message,this.loading=!1),500===a.response.status&&"Token vencido"===a.response.data.message&&((0,P.Z)(),this.getCommunication()),401===a.response.status&&this.$router.push("micuenta-update")}))},setComunicacion(a){this.selectCommunication=this.communications[a],console.log(this.selectCommunication,"soy la comunicacionw")}}};const V=(0,L.Z)(S,[["render",k],["__scopeId","data-v-8146926c"]]);var $=V}}]);
//# sourceMappingURL=241.27429ed5.js.map