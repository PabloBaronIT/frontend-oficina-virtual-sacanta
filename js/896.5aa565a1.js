"use strict";(self["webpackChunkoficina_vue"]=self["webpackChunkoficina_vue"]||[]).push([[896],{8896:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var s=t(3396),n=t(7139),i=t(7389);const o=e=>((0,s.dD)("data-v-617099d6"),e=e(),(0,s.Cn)(),e),r={class:"container"},d={key:0,class:"prueba-container l"},l=o((()=>(0,s._)("div",{class:"spinner-grow text-success",role:"status"},[(0,s._)("span",{class:"sr-only"})],-1))),c=o((()=>(0,s._)("div",{class:"spinner-grow text-success",role:"status"},[(0,s._)("span",{class:"sr-only"})],-1))),u=o((()=>(0,s._)("div",{class:"spinner-grow text-success",role:"status"},[(0,s._)("span",{class:"sr-only"})],-1))),h=[l,c,u],m={key:1,class:"container"},p=o((()=>(0,s._)("br",null,null,-1))),g=o((()=>(0,s._)("h2",null,"Gracias por utilizar la oficina virtual de Sacanta",-1))),y={key:0,class:"constancia",id:"constanciaPago"},P=o((()=>(0,s._)("img",{src:i,alt:"Sacanta",class:"imagenlogo"},null,-1)));function f(e,a,t,i,o,l){const c=(0,s.up)("n5"),u=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",r,[this.loading?((0,s.wg)(),(0,s.iD)("div",d,h)):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("h1",null,[(0,s.Uk)((0,n.zw)(this.message)+" ",1),p]),g,null!=this.dataPayment?((0,s.wg)(),(0,s.iD)("div",y,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(this.message),1)])),_:1}),(0,s._)("h4",null,"Nombre del tr치mite: "+(0,n.zw)(this.dataPayment?.procedure.title),1),(0,s._)("p",null,"Valor abonado:$ "+(0,n.zw)(this.dataPayment?.procedure.price),1),(0,s._)("p",null,"Numero de operaci칩n:"+(0,n.zw)(this.dataPayment.payment[0]?.payment_id),1),(0,s._)("h4",null,(0,n.zw)(this.dataPayment.user.firstname)+" "+(0,n.zw)(this.dataPayment.user.lastname)+" "+(0,n.zw)(this.dataPayment.user.cuil),1),(0,s._)("p",null,"Fecha: "+(0,n.zw)(this.fecha),1),(0,s._)("button",{type:"button",onClick:a[0]||(a[0]=(...e)=>l.download&&l.download(...e)),class:"btn btn-primary"}," Descargar ")])):(0,s.kq)("",!0),P,(0,s.Wm)(u,{to:"/munienlinea",class:"bn3"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Inicio ")])),_:1})]))])}var w=t(70),_=t(8713),b=t(5939),k=t(9306),v=t(8914),I={name:"Pago-exitoso",created(){this.IdResultado=this.$route.query.IdResultado,this.IdReferenciaOperacion=this.$route.query.IdReferenciaOperacion,this.loading=!0,this.dispatchLoginPermission(),this.setPayment()},data(){return{IdResultado:"",IdReferenciaOperacion:"",message:"",loading:!1,user:"",cidiCookie:"",dataPayment:null,fecha:""}},computed:{setPermission(){return!0===this.$store.state.loggedIn}},methods:{dispatchLoginPermission(){this.$store.dispatch("mockPaseAction")},setPayment(){console.log(this.IdResultado,this.IdReferenciaOperacion,"soy el idResutado y el IdReferencia");const e=w.ZP.create({baseURL:k._n,withCredentials:!1,headers:{"auth-header":localStorage.getItem("token"),"access-user-header":"^Yh19S&^8$yl01&Fagyg8eLxrI8uxypiCpdUdRscjF!xKSSqq"}});e.post("/confirm-payment/"+this.IdReferenciaOperacion).then((e=>{console.log(e.data),this.message=e.data.message,this.dataPayment=e.data.ProcedureData,this.fecha=new Date(e.data.actual_date).toLocaleDateString()||"",this.loading=!1})).catch((e=>{console.log(e),this.message=e.response.data.message,this.dataPayment=null,this.loading=!1,500===e.response.status&&("Token de usuario expirado"===e.response.data.message&&((0,_.Z)(),this.setPayment()),"Token de representante expirado"===e.response.data.message&&((0,b.Z)(),this.setPayment()))}))},download(){var e=new v.ZP("p","pt","A4");e.setFontSize(20),e.setTextColor(0,128,0);let a="https://github.com/PabloBaronIT/frontend-oficina-virtual/blob/main/src/assets/muni-en-linea-logo.png?raw=true";e.addImage(a,"JPEG",50,30,60,60),e.text(20,30,"Constacia de pago."),e.setFontSize(15),e.setTextColor(0,0,0),e.text(20,60,`Tramite: ${this.dataPayment?.procedure.title}, Id: ${this.dataPayment?.id}`,{lineHeightFactor:2}),e.text(20,80,`Valor abonado: ${this.dataPayment?.procedure.price}`),e.text(20,100,`Cuil: ${this.dataPayment?.user.cuil}, nombre: ${this.dataPayment?.user.firstname} ${this.dataPayment?.user.lastname}`),e.text(20,120,`Numero de Operaci칩n: ${this.dataPayment.payment[0]?.payment_id}`),e.text(20,140,`Fechad de emisi칩n: ${this.fecha}`),e.save("Costancia de pago.pdf")}}},x=t(89);const $=(0,x.Z)(I,[["render",f],["__scopeId","data-v-617099d6"]]);var R=$}}]);
//# sourceMappingURL=896.5aa565a1.js.map